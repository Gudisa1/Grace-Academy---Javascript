# **JavaScript Callback Functions — A Complete Guide**

---

## What is a Function in JavaScript?

A **function** is a block of reusable code designed to perform a particular task. You call (execute) a function by its name.

### Example:

```javascript
function greet(name) {
  console.log('Hi ' + name);
}

greet('Peter');  // Output: Hi Peter
```

Here, the function `greet` takes a parameter `name` and prints a greeting message.

---

## What is a Callback Function?

In JavaScript, **functions are first-class objects**, which means:

* You can **store functions in variables**.
* You can **pass functions as arguments** to other functions.
* You can **return functions** from other functions.

A **callback function** is a function passed **as an argument** to another function, which will be called (executed) inside the outer function.

### Why use callbacks?

Callbacks let you:

* Control the order of execution.
* Execute code **only after another task is complete**.
* Write more flexible, reusable, and asynchronous code.

---

## Basic Example of Callback Function

```javascript
function greet(name, callback) {
  console.log('Hi ' + name);
  callback();
}

function callMe() {
  console.log('I am a callback function');
}

greet('Peter', callMe);
```

### Output:

```
Hi Peter
I am a callback function
```

* Here, `callMe` is the **callback function**.
* It is passed as a parameter to `greet` and called inside it.
* So, first `greet` prints the greeting, then `callMe` runs.

---

## Why are Callback Functions Useful?

Callback functions are very useful in **asynchronous programming** — where some operations take time to complete (like fetching data from a server, reading files, or waiting for user events).

---

## Understanding Asynchronous Execution with `setTimeout`

Consider the `setTimeout()` method: it executes a function after a delay.

```javascript
function greet() {
  console.log('Hello world');
}

function sayName(name) {
  console.log('Hello ' + name);
}

// call greet after 2 seconds
setTimeout(greet, 2000);
sayName('John');
```

### Output:

```
Hello John
Hello world
```

* `sayName('John')` executes immediately.
* `greet()` executes **after 2 seconds**.
* This shows **asynchronous behavior** — the second function does NOT wait for the first.

---

## Using Callbacks to Control Execution Order

If you want to **wait** for a function to finish before running another, you use a callback.

```javascript
function greet(name, myFunction) {
  console.log('Hello world');

  // callback executed only after greet() finishes
  myFunction(name);
}

function sayName(name) {
  console.log('Hello ' + name);
}

setTimeout(greet, 2000, 'John', sayName);
```

### Output (after 2 seconds):

```
Hello world
Hello John
```

* `sayName` is passed as a callback to `greet`.
* `greet` is called after 2 seconds.
* Inside `greet`, after printing "Hello world", `sayName` is called with the name.

---

## How Callbacks Help in Real-World JavaScript

Callbacks are crucial in:

* Handling server responses (AJAX, fetch).
* Listening to user events (clicks, key presses).
* Timers and animations.
* Any operation that takes time and should not block the program.

---

## Callback Functions: Common Mistakes

* **Not calling the callback** inside the outer function.
* **Forgetting to pass the callback function** when calling the outer function.
* Mixing synchronous and asynchronous code improperly.

---

## More Advanced Callback Example: Simulating a Data Fetch

```javascript
function fetchData(callback) {
  console.log("Fetching data...");

  // Simulate server delay
  setTimeout(function() {
    let data = { name: "Alice", age: 30 };
    console.log("Data fetched");
    
    // Call the callback with the data
    callback(data);
  }, 3000);
}

function processData(data) {
  console.log("Processing data:", data);
}

fetchData(processData);
```

### Output:

```
Fetching data...
Data fetched
Processing data: { name: 'Alice', age: 30 }
```

* `fetchData` simulates a delay.
* When data is "fetched", it calls the callback `processData` with the data.
* This ensures **processing happens only after fetching is done**.

---

## Challenge: Write a Callback to Calculate Factorial

The **factorial** of a non-negative integer `n` is the product of all positive integers less than or equal to `n`.

* Example: factorial of 3 = 3 × 2 × 1 = 6.
* factorial of 0 = 1 (by definition).

---

### Your Task:

Write a function named `calculateFactorial` that:

* Takes two arguments: a number `num` and a callback function `callback`.
* Calculates the factorial of `num`.
* Passes the result to the callback function.

---

### Example Expected Usage:

```javascript
function printResult(result) {
  console.log("Factorial is:", result);
}

calculateFactorial(5, printResult);  // Output: Factorial is: 120
```

---

### Hint to Solve:

You can use a loop or recursion to calculate factorial, then call the callback with the answer.

---

## Summary

* A **callback function** is a function passed as an argument to another function.
* Callbacks allow you to **control when and how functions execute**, especially in asynchronous code.
* Useful in many areas such as timers, events, server requests.
* Always remember to **call the callback function** inside the outer function.
* Practice writing callbacks with simple examples like factorial or string manipulation.

---

